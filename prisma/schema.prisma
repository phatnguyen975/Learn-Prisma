generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Category {
  id        Int       @id @default(autoincrement())
  name      String    @unique @db.VarChar(60)
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime  @updatedAt @map("updated_at")
  products  Product[]

  @@map("categories")
}

model Product {
  id          Int          @id @default(autoincrement())
  name        String       @db.VarChar(120)
  description String?      @db.Text
  price       Decimal      @db.Decimal(10, 2)
  currency    String       @default("USD") @db.VarChar(3)
  quantity    Int          @default(0)
  active      Boolean      @default(true)
  createdAt   DateTime     @default(now()) @map("created_at")
  updatedAt   DateTime     @updatedAt @map("updated_at")
  categoryId  Int          @map("category_id")
  category    Category     @relation(fields: [categoryId], references: [id])
  tags        ProductTag[]

  @@map("products")
}

model Tag {
  id        Int          @id @default(autoincrement())
  name      String
  createdAt DateTime     @default(now()) @map("created_at")
  updatedAt DateTime     @updatedAt @map("updated_at")
  products  ProductTag[]

  @@map("tags")
}

model ProductTag {
  product   Product  @relation(fields: [productId], references: [id])
  productId Int      @map("product_id")
  tag       Tag      @relation(fields: [tagId], references: [id])
  tagId     Int      @map("tag_id")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@id([productId, tagId])
  @@map("product_tag")
}
